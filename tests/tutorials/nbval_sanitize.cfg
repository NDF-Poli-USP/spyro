# Sanitization configuration for nbval
# This file defines regex patterns to sanitize notebook outputs
# to make tests more robust across different environments

[regex]
# Remove memory addresses
.*0x[0-9a-f]+.*

# Remove timing information 
.*took [0-9\.]+ seconds.*
.*in [0-9\.]+s.*
.*Wall time:.*

# Remove file paths that might be environment specific
.*/tmp/.*
.*/var/.*
.*/.cache/.*

# Remove workspace/CI path differences 
.*/__w/spyro/spyro/.*
.*/workspaces/fix_tutorials/.*
.*spyro/io/model_parameters.py.*
.*spyro/solvers/wave.py.*
.*spyro/solvers/acoustic_wave.py.*

# Remove warnings that are environment specific
.*UserWarning.*
.*DeprecationWarning.*
.*PendingDeprecationWarning.*
.*FutureWarning.*

# Remove firedrake/spyro specific warnings that are expected
.*No velocity model set initially.*
.*If using.*
.*please input it in the Wave object.*
.*No mesh file.*Firedrake mesh will be automatically generated.*
.*No mesh found.*Please define a mesh.*
.*Converting segy file to hdf5.*
.*Velocity appear to be in km/s.*Maybe pass.*units.*
.*The use of.*interpolate.*to perform.*is deprecated.*
.*Applying str.*to a metadata value.*QuadratureRule.*

# Remove matplotlib backend warnings
.*backend.*
.*GUI.*

# Remove progress bars and dynamic outputs
.*\[.*\].*%.*
.*ETA:.*
.*\r.*

# Remove specific numeric precision differences
.*[0-9]+\.[0-9]{6,}.*

# Remove any line containing absolute paths
.*/.*\.py:[0-9]+:.*
.*\.py:[0-9]+:.*Warning.*
.*firedrake.*interpolation.*deprecated.*
.*FutureWarning.*interpolate.*deprecated.*
.*Instead.*import.*interpolate.*from.*firedrake.*__future__.*

# Remove matplotlib/plotting related errors
.*backend.*
.*display.*
.*DISPLAY.*
.*tkinter.*
.*GUI.*
.*QApplication.*
.*cannot connect to X server.*
.*No such file or directory.*plot.*
.*Permission denied.*png.*

# Remove firedrake mesh generation messages
.*mesh.*generated.*
.*Creating.*mesh.*
.*Mesh.*created.*

# Remove memory/resource warnings
.*memory.*
.*RAM.*
.*swap.*
.*resource.*

# Remove file writing messages
.*Writing.*
.*Created.*file.*
.*Saved.*to.*